<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Legal Document Analyzer</title>
    <link rel="stylesheet" href="static/css/style.css">
</head>
<body>
    <nav>
        <a href="index.html">Home</a>
        <a href="projects.html">Projects</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
    </nav>

    <h1>Legal Document Analyzer</h1>

    <form id="analyze-form">
        <input type="file" id="pdf-file" required>
        <button type="submit">Analyze</button>
    </form>

    <pre id="result"></pre>

    <script>
    const form = document.getElementById("analyze-form");

    form.addEventListener("submit", async (e) => {
        e.preventDefault();

        const fileInput = document.getElementById("pdf-file");
        const resultBox = document.getElementById("result");

        resultBox.textContent = "Analyzing...";

        const formData = new FormData();
        formData.append("file", fileInput.files[0]);

        try {
            const response = await fetch(
                "https://website-v7fe.onrender.com/analyze",
                {
                    method: "POST",
                    body: formData
                }
            );

            if (!response.ok) {
                const text = await response.text();
                resultBox.textContent =
                    "Server error:\n" + text;
            return;
            }

            const data = await response.json();
            resultBox.textContent = data.result;

        } catch (err) {
            resultBox.textContent =
                "Request failed:\n" + err.message;
        }
    });
    </script>
</body>
</html>
